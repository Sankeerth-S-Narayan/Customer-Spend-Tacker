ğŸ’¼ System Design Work Document
Project Title: Customer Spending Analytics Dashboard
Author: Sankeerth Sridhar Narayan
Version: 1.0
Date: June 25, 2025
________________________________________
ğŸ“Œ Project Overview
ğŸ¯ Goal
To build a complete sample full-stack analytics platform that allows a user to:
â€¢	Log in
â€¢	View descriptive analytics dashboards on personal spending
â€¢	Interact with transaction data (filter, summarize, visualize)
â€¢	Experience a real-world engineering setup: frontend/backend/API integration, Dockerized services, GitHub Actions automation
This project is not deployed but runs entirely locally, giving hands-on practice with modern development workflows, CI/CD, and scalable architecture.
________________________________________
ğŸ§± System Architecture
âš™ï¸ Components:
â€¢	Frontend: Built with Panel (Python) for interactive dashboards and charting
â€¢	Backend: FastAPI serving APIs for login, transaction data, and aggregated metrics
â€¢	Database: PostgreSQL container storing users and transaction data
â€¢	APIs:
o	Internal: REST API for login, data retrieval, and analytics
o	External: Optionally pull simulated data from public APIs or use CSV
â€¢	Authentication: Basic JWT authentication (simulated users)
â€¢	Containerization: Docker Compose for local orchestration
â€¢	CI/CD: GitHub Actions pipeline to run tests, lint checks, and validate builds
â€¢	Version Control: Git with feature branch strategy (dev, test, main)
________________________________________
ğŸ—ºï¸ Architecture Diagram
pgsql
CopyEdit
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   Panel UI  â”‚  â† Frontend (Python)
                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ HTTP (fetch/chart update)
                        â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   FastAPI    â”‚  â† Backend
                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ SQLAlchemy ORM
                        â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ PostgreSQL DBâ”‚  â† Structured transaction data
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
________________________________________
ğŸ”§ Technology Stack
Layer	Technology	Purpose / Justification
Frontend	Panel	Pythonic dashboard building with Bokeh-style interactivity
Backend	FastAPI	Fast, async, and modern API server
Database	PostgreSQL	Structured storage with transaction & user relationships
Auth	JWT (simulated)	Lightweight token-based login
Containerization	Docker + Compose	Easy local orchestration of multiple services
CI/CD	GitHub Actions	Automated linting, testing, and build checks
Git Strategy	Git + Branching	Standard feature-branch + PR workflow
________________________________________
ğŸ”„ User Journey
ğŸ§ 1. Login
â€¢	User enters username/password
â€¢	Backend validates and issues a token
ğŸ“Š 2. Dashboard
â€¢	User lands on dashboard
â€¢	Panel requests analytics via API
ğŸ“ 3. Filters & Interaction
â€¢	Filters: date range, categories, amount
â€¢	Panel calls backend /transactions and /metrics endpoints
ğŸ“ˆ 4. Visualization
â€¢	Metrics shown:
o	Total Spend
o	Average Monthly Spend
o	Top Categories (Pie Chart)
o	Spend Over Time (Line/Bar Chart)
________________________________________
ğŸ§¾ API Design
Endpoint	Method	Description	Requires Auth	Input / Params	Response
/login	POST	Authenticate user	âŒ No	JSON (username/password)	Token
/transactions	GET	Get filtered transactions	âœ… Yes	Query params (date, category, amount)	JSON List
/metrics	GET	Aggregated analytics (total, avg, top categories)	âœ… Yes	None	JSON Object
________________________________________
ğŸ—„ï¸ Database Schema
Users
Column	Type	Notes
id	SERIAL	Primary Key
username	TEXT	Unique
password	TEXT	Plaintext or hashed (simulation only)
Transactions
Column	Type	Notes
id	SERIAL	Primary Key
user_id	INT	Foreign key to Users
amount	FLOAT	Transaction value
category	TEXT	e.g., Food, Travel
timestamp	TIMESTAMP	When the transaction took place
________________________________________
ğŸ³ Docker Setup
Project Structure
bash
CopyEdit
project-root/
â”œâ”€â”€ frontend/               # Panel app
â”œâ”€â”€ backend/                # FastAPI app
â”œâ”€â”€ db/                     # SQL init scripts
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
Docker Compose (docker-compose.yml)
yaml
CopyEdit
version: '3.9'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
    env_file:
      - .env
    depends_on:
      - db

  frontend:
    build: ./frontend
    ports:
      - "8501:8501"
    volumes:
      - ./frontend:/app
    depends_on:
      - backend

  db:
    image: postgres:15
    restart: always
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./db/init.sql:/docker-entrypoint-initdb.d/init.sql
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: analytics_db

volumes:
  postgres_data:
________________________________________
ğŸ” Git Strategy
â€¢	main: Stable, production-quality code
â€¢	test: Integration-tested and feature-merged
â€¢	dev: Active development
â€¢	feature/*: Feature branches
â€¢	bugfix/*: Bug fix branches
________________________________________
ğŸ”„ GitHub Actions (CI/CD)
Pipeline Goals
â€¢	On every push to dev, test, or main:
o	âœ… Checkout code
o	âœ… Install dependencies
o	âœ… Run format check (black)
o	âœ… Run linter (flake8)
o	âœ… Run tests (pytest)
Workflow File Example (.github/workflows/main.yml)
yaml
CopyEdit
name: CI Pipeline

on:
  push:
    branches:
      - dev
      - test
      - main

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install -r backend/requirements.txt
          pip install -r frontend/requirements.txt

      - name: Lint Check
        run: |
          flake8 backend
          flake8 frontend

      - name: Run Tests
        run: |
          pytest backend/tests
          pytest frontend/tests
________________________________________
ğŸ› ï¸ Development Flow (Recommended Order)
Step	Task
1	Initialize Git repo, create dev, main, test branches
2	Define .env and Docker Compose setup
3	Create DB schema + seed data (use CSV or public API)
4	Build FastAPI backend with JWT login, /transactions, /metrics
5	Build Panel frontend with basic layout
6	Connect frontend â†” backend with API requests
7	Add filtering, charting
8	Write and test API unit tests
9	Setup GitHub Actions CI
10	Final QA pass and prepare for future cloud deployment

